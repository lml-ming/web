---
typora-copy-images-to: mdImg
---



# 学习目标

>- [x] 能够说出什么是 Web API
>
>  - webAPI：js准备好的方法，通过这些方法可以操作页面中的元素和浏览器的功能
>
>- [x] 能够说出什么是DOM
>
>  - DOM：文档对象模型：一套操作网页中元素的方法
>
>- [x] 能够获取页面元素
>
>  ```js
>  // 通过id获取元素
>  var box = document.getElementById('id属性值');
>  
>  // 通过标签名获取元素——》获取的肯定是伪数组
>  var lis = document.getElementsByTagName('标签名');
>  ```
>
>  
>
>- [x] 能够说出事件三要素是什么
>
>  - 事件源：触发事件的这个元素（比如：按钮、）
>  - 事件名：被干了什么（比如：点击、移入、移出）
>  - 事件处理程序：触发事件之后，要做的事情
>
>- [x] 能够给页面上的元素注册事件
>
>  ```js
>  btn.onclick = function (){}
>  link.onmouseover = function (){}
>  link.onmouseout = function (){}
>  ```
>
>  
>
>- [x] 能够使用className操作元素的样式
>
>  ```js
>  box.className = 'red';
>  ```
>
>  
>
>- [x] 能够说出事件中的this指向
>
>  - 事件中的this默认指向事件源
>
>- [x] 能够说出innerHTML和innerText的区别
>
>  - innerText
>    - 获取内容：只能获取文本
>    - 设置内容：只能设置文本，标签不会被解析
>  - innerHTML
>    - 获取内容：能获取文本和标签
>    - 设置内容：能设置文本和标签，标签会解析
>
>- [ ] 能够写出美女相册案例
>
>。。。。。。



**理解上课的知识点......**



# WebAPI基本概念

## 为什么要学习WebAPI?

> 同学们最早对于WebAPI的接触是在介绍js的组成的时候

**js的组成：**

![javascript](mdImg/javascript.png)

- **ECMAScript（js的核心）**：定义了js的语法规范，描述了语言的基本语法和数据类型

  > ECMAScript是一套标准，定义了一种语言的标准与具体实现无关。

- **DOM（文档对象模型）**：一套操作页面元素的API（方法）

  > DOM可以把HTML看做是文档树，通过DOM提供的API可以对页面中的元素进行操作
  
- **BOM（浏览器对象模型）**：一套操作浏览器功能的API（方法）

  > 通过BOM可以操作浏览器窗口，比如：弹出框、控制浏览器跳转、获取分辨率等 

之前学习的js基础其实就是学习ECMAScript语法规范，都是在打基础，并不能完成非常炫酷的效果。

如果想要做出好看的页面效果，就需要学习Web API，学了Web API之后就能操作页面元素了，才能做出来一些炫酷的效果。

## 什么是WebAPI？

**API（Application Programming Interface）：应用程序编程接口**。API是一些预先定义的方法，这些方法能够实现某些特定的功能，我们无须知道这些API的实现方式，但是我们需要知道这些API如何使用。

> 任何开发语言都会提供自己的API，js中也提供了

说白了，API就是编程语言给我提供的一些工具，通过这些工具，我们可以非常轻易的完成一些功能。

**webAPI：** 浏览器提供的一套操作网页（web）的API（方法），通过这套API我们可以非常轻易的操作页面的元素和浏览器的一些功能。

---

# DOM-文档对象模型

## DOM基本概念

> DOM（Document Object Model）文档对象模型，是`W3C组织`推荐的一套用于处理`HTML`的标准`编程接口`。

浏览器执行网页代码时，会将页面中所有的元素在内存中用对象表示，并且元素和对象是一一对应的。

因为HTML中标签的嵌套关系就类似于一个树形的结构，所有对应的对象之间也是树状结构。因此DOM又称为文档树模型

![1](mdImg/1.png)

DOM中常见的概念：

- 文档`document`：一个网页可以称为文档

- 节点`node`：网页中的所有内容都是节点（标签、属性、文本、注释等）

- 元素`element`：网页中的标签（标签节点）

---

# 获取元素

> 在DOM中，如果需要操作一个元素，首先需要先获取到对应的元素
>
> 那么有哪些常见的获取元素的方式呢？

## 根据id获取元素

> 可以通过id属性获取元素

```javascript
//功能：通过id获取元素
//参数：字符串类型的id值
//返回值：元素，如果id不存在，会返回null
var box = document.getElementById('box');

console.log(box);
console.dir(box);
```

关于`console.log`和`console.dir`的区别：

- `console.log`：如果打印的是一个元素的时候，是以标签的形式进行展示的
- `console.dir`：如果打印的是一个元素的时候，是以对象的形式进行展示的



**注意点：获取的DOM对象和网页中的标签是一一对应的，操作了对象，其实就操作了页面中的标签**

> 因此，我们可以通过操作DOM对象，从而操作页面中的元素

```html
// html内容
<div title="呵呵" id="box">

<script>
// javascript代码
var box = document.getElementById('box');
box.title = "哈哈";
</script>

// 结果：此时页面中div标签的title属性就发生了更改
<div title="哈哈" id="box">
```

---

## 获取元素的注意点

- 如果通过DOM获取元素对象未获取到（如：id写错了），此时会返回null（一个空类型）

- 一般script标签写在body标签里面的最下面，目的是保证页面加载完之后，再获取元素。

  > 如果script标签写在body标签上面，因为页面代码是从上往下执行的，此时页面还没加载出来就获取元素，所以无法获取到。

- 部分浏览器，如果元素设置了id属性，可以直接通过id拿到元素使用（但是不是规范，不推荐）

---

## 根据标签名获取元素

> 可以通过标签名获取元素

```javascript
//参数：标签名
//返回值：一个伪数组，伪数组不是真正的数组，有下标和长度，可以遍历，但是不能使用数组特定的方法
var divs = document.getElementsByTagName('div');
```



**注意点：**

- 通过标签名获取到的数据，是一个伪数组

  > 伪数组可以遍历，但是没有数组中特定的方法

- 无论找到多少个元素（哪怕是0个），都会返回一个伪数组

- 通过标签名直接找会找到页面中所有的标签，此时可以**缩小范围查找**

  > 直接使用`document.getElemntsByTagName("li")`：表示获取页面中所有的li元素，范围太大了，
  >
  > 此时可以使用类似`left.getElementsByTagName("li")`：表示获取box中所有的li元素，范围更小。

---

##### ---------------------------

# 注册事件

> 在实际网页中是需要和用户进行交互的，比如在网页中当用户点击按钮之后把第一张图片切换成第二张图片，此时就需要使用到事件来完成效果
>
> 事件：触发-响应机制，javascript是基于事件驱动的。



**事件三要素：**

- **事件源：** 触发事件的那个元素（比如：按钮、盒子）
- **事件名：** 事件的名字（比如：点击、移入......）
- **事件处理程序：**触发事件之后要执行的代码（比如：一般就是一个函数）

> 场景：按钮被用户点击了，网页显示了一张美女图片。事件三要素是啥？



**基本语法：**

`事件源.on事件名 = 事件处理程序`

**需求：** 点击一个按钮，在控制台打印一句话

**代码：**

```javascript
var btn = document.getElementById('btn');
// on：当  
// click:点击 ——》当按钮被点击的时候触发
btn.onclick = function() {
  console.log('哎呀，被点击了！');  
};
```

**注意点：**

- 事件处理程序并不是立马执行，只有当事件被触发时，才会在会执行

  > 好比是程序员告诉按钮（注册事件）：按钮兄弟，你被点了后，记得在控制台叫一声
  >
  > - 告诉完之后按钮后，按钮不会立马叫
  > - 等按钮真的被点了，才会在控制台中叫

---

## 修改标签的属性练习

> 在DOM中，页面标签的属性和DOM对象的属性是一一对应的，因此我们可以通过修改DOM对象的属性来修改标签的属性。



##### ヾ(๑╹◡╹)ﾉ"点击按钮，切换图片

> 标签的alt，title，src，width，height等属性，可以直接通过对象进行修改。

<img src="mdImg/点击切换图片.gif" alt="点击切换图片" style="zoom: 80%;" />

**步骤：**

- 找对象——》获取事件源（按钮）
- 给对象注册事件——》给按钮注册onclick点击事件
- 设置事件处理程序——》写换图片的函数，找到图片修改图片的路径

---



##### ヾ(๑╹◡╹)ﾉ"点击按钮，给div设置样式

<img src="mdImg/点击给div设置样式.gif" alt="点击给div设置样式" style="zoom:80%;" />

**步骤：**

- 找对象——》获取事件源（按钮）
- 给对象注册事件——》给按钮注册onclick点击事件
- 设置事件处理程序——》给div添加class类

**注意点：**

- **因为在js中class是关键字，所以需要标签的class属性在DOM对象中要用className替换**

---



##### ヾ(๑╹◡╹)ﾉ"点击两个按钮，让div显示与隐藏

> 设置不同的类，通过`display:none`和`display:block`进行切换
>
> ——》**升级：如果用一个按钮进行切换呢？** 
>
> ——》思路：判断当前box的class属性是hidden还是show——》然后设置另外一个

<img src="mdImg/点击让元素显示与隐藏.gif" alt="点击让元素显示与隐藏" style="zoom:80%;" />

---



##### ヾ(๑╹◡╹)ﾉ"鼠标移入a标签让二维码显示

> 把写好的静态页面，通过注册事件的方式完成动态功能

<img src="mdImg/移入让元素显示隐藏切换.gif" alt="移入让元素显示隐藏切换" style="zoom:80%;" />

**思路：**

1. 当鼠标移入a标签时，让二维码div显示——》给二维码div设置show类
2. 当鼠标移入a标签时，让二维码div隐藏——》给二维码div设置hidden类

**两个事件：**

- **onmouseover：**鼠标移入（经过）的事件
- **onmouseout：**鼠标移出（离开）的事件

**注意点：** **直接给给className属性赋值的时候，会把之前所有的类名都覆盖。**



---

##### ---------------------------

## 事件中的this

> 在当前事件处理函数中，可以使用this关键字——》就表示当前触发的元素（事件源）

**需求：要求点击一个input按钮之后，把当前input按钮中的value属性进行修改**

- 可以找到元素，进行修改

- 通过事件处理函数中的this进行修改

  > 好处就是如果元素的名字发生改变，此时this不需要改变

**代码：**

```javascript
//  1、找对象
var btn = document.getElementById("btn");

// 2、注册事件
btn.onclick = function() {
   //  1、直接找到这个对象修改vlaue
   // btn.value = 'value被改了';

   // 2、如果在事件处理函数中操作的就是当前事件源（元素），可以通过this表示
   this.value = 'value又被改了';
}
```

---



##### ヾ(๑╹◡╹)ﾉ" 导航效果1：点击li标签，就让li标签颜色变成红色（加类即可）

> 把写好的静态页面，通过注册事件的方式完成动态功能

![点击让li变色](mdImg/点击让li变色.gif)

**注意点：**

- 使用for循环给多个对象添加事件时，此时通过this进行设置

---



##### ヾ(๑╹◡╹)ﾉ" 导航效果2：点击不同的按钮，显示对应的图片

> 可以把图片的路径存到标签的title属性上

<img src="mdImg/点击多个按钮切换图片.gif" alt="点击多个按钮切换图片" style="zoom:80%;" />

---



## 阻止a标签跳转

> 对于a标签来说，默认的行为就是进行页面跳转，如果不想让a标签进行跳转，可以在注册事件中使用`return false`

**例子：** 点击a标签，让img标签切换图片

在事件处理函数中，最后写上`return false` ，可以**阻止a标签的跳转**功能

```javascript
//  1、找对象
var link = document.getElementById('link');
var img = document.getElementById('img');

// 2、注册事件
link.onclick = function () {
    img.src = './images/2.jpg';

    //  阻止a标签的默认跳转
    return false;
}
```

---

##### ---------------------------------

# innerText与innerHTML

> 之前修改按钮的文字，都是使用input标签，修改其中的value属性完成的
>
> 其实也可以使用button标签，修改里面的文本完成。

**需求：** 当button按钮被点击之后，让button中的内容更改

**相同点：** 通过innerText和innerHTML都可以操作标签的内容。

**区别：**

- innerText属性：

  - 只能获取文本——》如果有标签会忽略

  - 只能设置文本——》当设置的是标签时，标签不能被解析，标签不能生效

- innerHTML属性：

  - 可以获取文本和标签
  - 可以设置文本和标签——》当设置的是标签，标签可以被解析，标签可以生效

```html
<div id="box">
  我是div中的文本
  <h1>我是div标签中的h1标签</h1>
</div>

<script>
  var box = document.getElementById('box');

  // 获取内容
  console.log( box.innerText );// 只能获取文本
  console.log( box.innerHTML );// 能获取文本和标签

  // 设置内容
  box.innerText = '<h1>我是一个h1标签</h1>';// 只能设置文本，不会解析标签
  box.innerHTML = '<h1>我是一个h1标签</h1>';// 能设置文本和标签，标签会被解析
</script>
```



**注意点：**

- 一般使用innerText，除非内容必须是HTML生效，并且保证足够安全，才使用innerHTML



##### ヾ(๑╹◡╹)ﾉ" 美女相册案例

> 把写好的静态页面，通过注册事件的方式完成动态功能

<img src="mdImg/美女相册切换案例.gif" alt="美女相册切换案例" style="zoom:80%;" />

- 给a标签注册点击事件，当a点击之后，将href属性的属性值赋值给bigImg的src属性
- 同时需要把a标签的title属性值赋值给des的内容

**注意点：**去除a标签的默认跳转